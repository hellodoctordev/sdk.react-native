var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.getConsultationNotices=getConsultationNotices;var _lodash=_interopRequireDefault(require("lodash"));var _moment=_interopRequireDefault(require("moment"));var _theme=require("./theme");var ConsultationNoticeImportance;(function(ConsultationNoticeImportance){ConsultationNoticeImportance[ConsultationNoticeImportance["LOW"]=0]="LOW";ConsultationNoticeImportance[ConsultationNoticeImportance["MEDIUM"]=1]="MEDIUM";ConsultationNoticeImportance[ConsultationNoticeImportance["HIGH"]=2]="HIGH";ConsultationNoticeImportance[ConsultationNoticeImportance["CRITICAL"]=3]="CRITICAL";})(ConsultationNoticeImportance||(ConsultationNoticeImportance={}));function getConsultationNotices(consultation){var assertedNotices=allConsultationNotices.filter(function(notice){return notice.asserts(consultation);});if(assertedNotices.length===0){return[];}var maxImportance=_lodash.default.maxBy(assertedNotices,function(notice){return notice.importance;}).importance;return assertedNotices.filter(function(notice){return notice.importance===maxImportance;});}var allConsultationNotices=[{id:'start_chat_consultation',importance:ConsultationNoticeImportance.LOW,status:'Listo',description:'El experto te atenderá en cuanto este disponible',color:_theme.HelloDoctorColors.Blue300,icon:'clock',asserts:function asserts(consultation){return consultation.type==='chat';}},{id:'pending_consultation',importance:ConsultationNoticeImportance.LOW,title:'Pendiente',status:'Pendiente',description:'Tu solicitud esta pendiente',color:_theme.HelloDoctorColors.Blue300,icon:'clock',asserts:function asserts(consultation){return consultation.status==='pending';}},{id:'missed_consultation',importance:ConsultationNoticeImportance.HIGH,status:'Perdida',description:'Se perdió la consulta',color:_theme.HelloDoctorColors.Red500,icon:'times-circle',asserts:function asserts(consultation){if(consultation.type==='chat'){return false;}var consultationStart=(0,_moment.default)(consultation.scheduledStart);var missedThresholdScheduledStart=(0,_moment.default)(consultationStart).add(60,'minutes');return _lodash.default.includes(['accepted','pending'],consultation.status)&&consultationStart.isBefore((0,_moment.default)())&&missedThresholdScheduledStart.isBefore((0,_moment.default)());}},{id:'scheduled_consultation',importance:ConsultationNoticeImportance.LOW,status:'Programada',description:'Tu cita está programada',color:_theme.HelloDoctorColors.Blue500,icon:'clock',asserts:function asserts(consultation){console.debug('checking scheduled_consultation');if(consultation.type==='chat'){return false;}var missedThresholdScheduledStart=(0,_moment.default)(consultation.scheduledStart).add(60,'minutes');return consultation.status==='accepted'&&(0,_moment.default)().isBefore(missedThresholdScheduledStart);}},{id:'upcoming_consultation',importance:ConsultationNoticeImportance.MEDIUM,status:'En breve',description:'En breve te contactará tu doctor',color:_theme.HelloDoctorColors.Green700,icon:'clock',asserts:function asserts(consultation){if(consultation.type==='chat'){return false;}return consultation.status==='accepted'&&(0,_moment.default)().add(30,'minutes').isAfter(consultation.scheduledStart)&&(0,_moment.default)().subtract(10,'minutes').isBefore(consultation.scheduledStart);}},{id:'in_progress_consultation',importance:ConsultationNoticeImportance.MEDIUM,status:'En curso',description:'Tu asesorīa está en curso',color:_theme.HelloDoctorColors.Green500,icon:'clock',asserts:function asserts(consultation){return consultation.status==='in-progress'||consultation.status==='pending-completion'||consultation.status==='connecting';}},{id:'completed_consultation',importance:ConsultationNoticeImportance.MEDIUM,status:'Completada',description:'Tu asesoría fue exitosa',color:_theme.HelloDoctorColors.Green700,icon:'check-circle',asserts:function asserts(consultation){return consultation.status==='completed';}},{id:'cancelled_consultation',importance:ConsultationNoticeImportance.HIGH,status:'Cancelada',description:'Se canceló la cita',color:_theme.HelloDoctorColors.Orange500,icon:'ban',asserts:function asserts(consultation){return consultation.status==='cancelled';}}];